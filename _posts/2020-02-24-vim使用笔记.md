---
toc: true
layout: post
description: vim 常用操作命令。
categories: [vim]
---
# vim使用笔记

## 常规文本操作

### 删除、撤销、复制、粘贴等

* `u`撤销操作
* `Ctrl-r`重做操作
* `:↑`在切换上一个命令
* `yy`复制
* `p`粘贴（p/P都可以，p是表⽰在当前位置之后，P表⽰在当前位置之前））
* `dd`删除当前行

### 各种插入模式

* `a` → 在光标后插⼊
* `o` → 在当前⾏后插⼊⼀个新⾏
* `O` → 在当前⾏前插⼊⼀个新⾏

### 光标移动

* `hjkl`(←↓↑→）的移动

* `0` → 数字零，到⾏头 

* `^` → 到本⾏第⼀个不是blank字符的位置（所谓blank字符就是空格， tab，换⾏，回⻋等） 

* `$` → 到本⾏⾏尾

* `g_` → 到本⾏最后⼀个不是blank字符的位置。

* `NG` → 到第 N ⾏

* `gg ` → 到第⼀⾏

* `G` → 到最后⼀⾏

* `w` → 到下⼀个单词的开头

* `e` → 到下⼀个单词的结尾

  > 如果你认为单词是由默认⽅式，那么就⽤⼩写的e和w。默认上来说，⼀个 单词由字⺟，数字和下划线组成
  >
  > 如果你认为单词是由blank字符分隔符，那么你需要使⽤⼤写的E和W。

* `b` → 倒退到上一个单词开头

* `%` →匹配括号移动

* `*和 #`：匹配光标当前所在的单词，移动光标到下⼀个（或上⼀个）匹配单词（*是下⼀个，#是上⼀个）。

* `H` → 移动到当前屏幕第一行

* `M` → 移动到当前屏幕中间行

* `L` → 移动到当前屏幕最后一行

### 屏幕滚动

* `Ctrl-F` →屏幕向下滚动一屏
* `Ctrl-B`→屏幕向上滚动一屏
* `Ctrl-E`→屏幕向下滚动一行
* `Ctrl-Y`→屏幕向上滚动一行
* `Ctrl-D`→屏幕向下滚动半屏
* `Ctrl-U`→屏幕向上滚动半屏

### 文件操作

* `:e <path/to/file>` → 打开⼀个⽂件 
* `:w` → 存盘 
* `:saveas <path/to/file>` → 另存为 <path/to/file> 
* `:x， ZZ 或 :wq` → 保存并退出 (:x 表⽰仅在需要时保存，ZZ不需要输 ⼊冒号并回⻋) :q! → 退出不保存 :qa! 强⾏退出所有的正在编辑的⽂件，就算别的⽂件有更改。

### 重复命令

* . → (⼩数点) 可以重复上⼀次的命令
* `:N<command>` → 重复某个命令N次

## 不同buffer之间跳转

* `:bn`切换到下一个文件。
* `:bp`切换到上一个文件。
* `:ls`列出buffer的列表，带编号。
* `:b [N]`切换到第N个文件，例如：`:b 3`切换到第三个文件。
* `:b {filename}`通过文件名切换到对应的buffer，`tab`可以补全。

## 多窗口与窗口跳转

* `:sp`打开一个新的水平切分窗口。
* `:vsplit`打开一个新的垂直切分窗口。

打开多个窗口后，以下命令在多窗口之间跳转（类似鼠标上下左右移动）：

* `Ctrl-W j`切换到下一个窗口
* `Ctrl-W k`切换到上一个窗口
* `Ctrl-W h`切换到左边窗口
* `Ctrl-W l`切换到右边窗口
* `Ctrl-W w`在各个窗口之间轮流切换

## 代码跳转

* 在目标文件夹下生成代码标签：`ctags -R`
* 通过vim打开某一代码文件，把光标移到要跳转的标识符上，按`Ctrl + ]`跳转到对应位置，按`Ctrl + o`退回到跳转前的位置
* 开启代码折叠：`:set foldmethod=indent`
  * `zM` 全部折叠
  * `zR` 全部展开
  * `zc` 在当前位置折叠
  * `zo | za` 在当前位置展开
  * `zC` 对当前区域做整体折叠；当前区域可以理解为整个函数
  * `zO | zA`  对当前区域做整体展开
  * `zj` 移动下一个折叠点
  * `zk` 移动到上一个折叠垫

## 文本搜索与替换

* `/pattern`在文本中按照pattern模式进行搜索，`n`查找下一个，`N`查找上一个
* `*`可以查找光标所在的单词，`g*`即可查找光标所在单词的字符序列，每次出现前后字符无要求。 
* `s`命令用来查找和替换字符串，语法：`:{作用范围}s/{目标}/{替换}/{替换标志}`

​        例如`:%s/foo/bar/g`会在全局范围(`%`)查找`foo`并替换为`bar`，每一行中所有出现都会被替换（`g`）。

​		不同的作用范围标志：

| 命令              | 作用范围                                                     |
| :---------------- | ------------------------------------------------------------ |
| :s/foo/bar/g      | 当前行                                                       |
| :%s/foo/bar/g     | 全文                                                         |
| :'<,'>s/foo/bar/g | visual模式下的选择区域，在visual模式下选择区域后输入`:`即可自动补全 |
| :.,+2s/foo/bar/g  | 当前行与接下来的两行                                         |

* 不同的替换标志：`g`全局替换

* 全局命令`:g`，语法：`:[range]global[!]/{pattern}/{command}`，简写成`:[range]g/pattern/command`。

  - [range] 指定文本范围，默认为整个文档

  - pattern 在范围 range 内的行如果匹配 pattern，则执行 command
  - ! 表示取反，也就是不匹配的行，也可以使用 `vglobal`
  - command 默认是打印文本
  - 整个命令可以理解成，在 range 范围内匹配 patter 的行执行 Ex command。
  - 常用的Ex command：d（删除）、m（移动）、t（拷贝）、s（替换）
  - 删除匹配的行：`:g/pattern/d`
  - 删除不匹配的行：`:g!/pattern/d`
  - 删除空白行：`:g/^$/d`
  - 将匹配的行移到文件末尾：`g/pattern/m$`
  - 复制匹配的行到文件末尾：`g/pattern/t$`

## 正则表达式

* 正则表达式的元字符必须用反斜杠进行转义才行
* 非贪婪匹配：`.\{-}`，贪婪匹配：`.*`



## 使用终端

* `!{cmd}`是vim命令，可以用来执行一条shell命令，命令完成后按任意键返回vim。
* `Ctrl+z`可以立即挂起当前进程，比如vim，进入shell， 完成一系列命令后，使用`fg`来返回vim。
* `:sh[ell]`是vim命令，可以从vim中运行一个shell，完成一系列命令后，通过`Ctrl+d`结束当前shell并返回vim。

## vim 插件管理

* 常用的vim插件管理方法是vundle。

## 其他命令

* `Ctrl -`缩小文本字号
* `Ctrl +`放大文本字号
* 